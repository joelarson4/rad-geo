require=function e(o,t,i){function a(n,s){if(!t[n]){if(!o[n]){var u="function"==typeof require&&require;if(!s&&u)return u(n,!0);if(r)return r(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[n]={exports:{}};o[n][0].call(c.exports,function(e){var t=o[n][1][e];return a(t?t:e)},c,c.exports,e,o,t,i)}return t[n].exports}for(var r="function"==typeof require&&require,n=0;n<i.length;n++)a(i[n]);return a}({1:[function(e,o){"use strict";function t(e){f=document.createElement("div"),f.className="rad-geo-container",f.style.backgroundColor="black",f.id="rad-geo-cesiumjs-container",document.body.appendChild(f),i(10,e)}function i(e,o){if("undefined"==typeof Cesium)return 0>=e?void alert("Cesium could not be loaded?"):setTimeout(function(){i(e--,o)},100);var t={animation:!1,timeline:!1,geocoder:!1,navigationHelpButton:!1,baseLayerPicker:!1,fullscreenButton:!1,homeButton:!1,sceneModePicker:!1};n(),p=new Cesium.Viewer(f.id,t),document.querySelector(".cesium-infoBox-iframe").setAttribute("sandbox","allow-same-origin allow-popups allow-forms allow-scripts")}function a(e){if("undefined"==typeof Cesium||null==p)return void setTimeout(function(){a(e)},100);var o=e.data.geo["goto"],t=e.data.geo.pin,i=e.data.geo.zoom,r=e.data.geo.speed,n=e.data.geo.style;n&&l(n),"pin"==o&&t?m(t,i,r):o?m(o,i,r):i&&m([],i,r),t?(console.log("pin"),console.log(t),c(t)):(console.log("clear"),d()),f.style.display="block"}function r(){f.style.display="none"}function n(){v={NASA_BLACKMARBLE:function(){return new Cesium.TileMapServiceImageryProvider({url:"//cesiumjs.org/tilesets/imagery/blackmarble",maximumLevel:8,credit:"Black Marble imagery courtesy NASA Earth Observatory"})}},Object.keys(Cesium.BingMapsStyle).forEach(function(e){v["BING_"+e]=function(){return u(e)}}),Object.keys(v).forEach(function(e){["SCENE2D","SCENE3D","COLUMBUS_VIEW"].forEach(function(o){h[o+"_"+e]={sceneMode:o,imagery:e}})})}function s(e){b!==e&&("SCENE2D"==e?p.scene.morphTo2D(2):"SCENE3D"==e?p.scene.morphTo3D(2):"COLUMBUS_VIEW"==e&&p.scene.morphToColumbusView(2),b=e)}function u(e){var o="rad-geo-cesium-bingMapsApi-defaultKey",t=localStorage.getItem(o);return t?Cesium.BingMapsApi.defaultKey=t:console.log("Once you have a bing maps key, set it using `localStorage.setItem('"+o+"', 'your-key');`.  Meanwhile, some functionality may not be available."),new Cesium.BingMapsImageryProvider({url:"//dev.virtualearth.net",key:t,mapStyle:Cesium.BingMapsStyle[e]})}function l(e){var o=p.scene.imageryLayers,t=C[h[e].imagery];if(t)o.raiseToTop(t);else{var i=v[h[e].imagery];t=o.addImageryProvider(i()),C[h[e].imagery]=t}s(h[e].sceneMode)}function c(e){if("keep"!=e){d();var o=new Cesium.PinBuilder;e.forEach(function(e){var t=(e.color||"WHITE/RED").split("/"),i=t.pop(),a=t.length?t[0]:"WHITE",r=p.entities.add({position:Cesium.Cartesian3.fromDegrees(e.lon,e.lat),billboard:{image:o.fromColor(Cesium.Color[i],48).toDataURL(),verticalOrigin:Cesium.VerticalOrigin.BOTTOM},label:new Cesium.LabelGraphics({text:e.label||"",outlineColor:Cesium.Color.WHITE,outlineWidth:0,fillColor:Cesium.Color[a],pixelOffset:new Cesium.Cartesian2(0,20),style:Cesium.LabelStyle.FILL_AND_OUTLINE})});g.push(r)})}}function d(){g.forEach(function(e){p.entities.remove(e)}),g=[]}function m(e,o,t){if("keep"==e)throw new Error("we don't yet support goto=pins pins=keep");var i=Number(o),a="undefined"==typeof o;(a||isNaN(i))&&(i=1e6,a=!0);var r=Number(t);("undefined"==typeof t||isNaN(r))&&(r=2e3);var n;if(0==e.length){var s=p.camera.positionCartographic;n=Cesium.Cartesian3.fromRadians(s.longitude,s.latitude,i)}else if(1==e.length)n=Cesium.Cartesian3.fromDegrees(e[0].lon,e[0].lat,i);else{var n,u=e.map(function(e){return new Cesium.Cartographic.fromDegrees(e.lon,e.lat,i)}),l=Cesium.Rectangle.fromCartographicArray(u),s=Cesium.Rectangle.center(l);a&&(i=4/3*Cesium.Ellipsoid.WGS84.cartesianToCartographic(p.camera.getRectangleCameraCoordinates(l)).height),n=Cesium.Cartesian3.fromRadians(s.longitude,s.latitude,i)}p.camera.flyTo({destination:n,duration:r/1e3})}var f,p,g=(e("rad-reveal"),[]);if("undefined"==typeof Cesium){var y=document.createElement("link");y.setAttribute("rel","stylesheet"),y.setAttribute("href","node_modules/cesiumjs/Build/Cesium/Widgets/widgets.css"),document.head.appendChild(y),head.js("node_modules/cesiumjs/Build/Cesium/Cesium.js")}var C={},v={},h={},b="SCENE3D";o.exports={initialize:t,show:a,hide:r}},{"rad-reveal":"rad-reveal"}],"/Users/larsonj/Sites/radReveal/rad-geo/src/geo.js":[function(e){"use strict";function o(o){m=o||{};var t=m.mapProviderModule;d="string"==typeof t?e(t):"object"==typeof t?t:e("./protoMapProvider.js"),d.initialize(m.mapProviderConfig)}function t(e,o){o.data.geo={}}function i(e,o){o!=f&&(f=o,d.show(o))}function a(e,o){o!=p&&(p=o,d.hide(o))}function r(e){var o=[],t=e.split(";");return t.forEach(function(e){e=e.replace("\\,","x002C");var t=e.split(","),i=Number(t[0].trim().match(y)[0]);t[0].toUpperCase().indexOf("S")>-1&&(i=-1*Math.abs(i));var a=Number(t[1].trim().match(y)[0]);t[1].toUpperCase().indexOf("W")>-1&&(a=-1*Math.abs(a));var r=(t[2]||"").trim();r=r.replace("x002C",",");var n=(t[3]||"").trim();o.push({lat:i,lon:a,label:r,original:e,color:n})}),o}function n(e,o){var t="pin"==e?"pin":r(e);o.data.geo["goto"]=t,"function"==typeof d.setGoto&&d.setGoto(t)}function s(e,o){var t="keep"==e?"keep":r(e);o.data.geo.pin=t,"function"==typeof d.setPins&&d.setPins(t)}function u(e,o){var t=2e3;"slow"==e?t=5e3:"medium"==e?t=2e3:"fast"==e?t=500:"instant"==e?t=0:(t=Number((e.match(y)||["2000"])[0]),isNaN(t)&&(t=2e3)),o.data.geo.speed=t,"function"==typeof d.setSpeed&&d.setSpeed(t)}function l(e,o){o.data.geo.zoom=e,"function"==typeof d.setZoom&&d.setZoom(e)}function c(e,o){o.data.geo.style=e,"function"==typeof d.setStyle&&d.setStyle(e)}var d,m,f,p,g=e("rad-reveal");e("./cesiumMapProvider.js");var y=/(-)?(\d)*(\.)?(\d)*/;g.register("geo",o),g.on("data-rad-geo*","load",t),g.on("data-rad-geo*","hide",a),g.on("data-rad-geo-goto","show",n),g.on("data-rad-geo-pin","show",s),g.on("data-rad-geo-speed","show",u),g.on("data-rad-geo-zoom","show",l),g.on("data-rad-geo-style","show",c),g.on("data-rad-geo*","show",i)},{"./cesiumMapProvider.js":1,"./protoMapProvider.js":2,"rad-reveal":"rad-reveal"}],2:[function(e,o){"use strict";function t(){n=document.createElement("div"),n.className="rad-geo-container",n.style.backgroundColor="cyan",document.body.appendChild(n),r("init")()}function i(){n.style.display="block",r("show")()}function a(){n.style.display="none",r("hide")()}function r(e){return function(o){u.push(s++ +" "+e+" "+(o?JSON.stringify(o):"")),u.length>10&&u.shift(),n.innerHTML=u.join("<br>"),o&&"function"==typeof o.callback&&o.callback()}}var n;alert("fixme!");var s=0,u=[];o.exports={initialize:t,setSpeed:r("setSpeed"),setZoom:r("setZoom"),setLoc:r("setLoc"),setGoto:r("setGoto"),show:i,hide:a}},{}]},{},["/Users/larsonj/Sites/radReveal/rad-geo/src/geo.js"]);