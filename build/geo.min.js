require=function e(o,t,a){function i(r,s){if(!t[r]){if(!o[r]){var u="function"==typeof require&&require;if(!s&&u)return u(r,!0);if(n)return n(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var d=t[r]={exports:{}};o[r][0].call(d.exports,function(e){var t=o[r][1][e];return i(t?t:e)},d,d.exports,e,o,t,a)}return t[r].exports}for(var n="function"==typeof require&&require,r=0;r<a.length;r++)i(a[r]);return i}({1:[function(e,o){"use strict";function t(e,o){g=document.createElement("div"),g.className="rad-geo-container",g.style.backgroundColor="black",g.id="rad-geo-cesiumjs-container",document.body.appendChild(g),a(10,e,o)}function a(e,o,t){if("undefined"==typeof Cesium)return 0>=e?void alert("Cesium could not be loaded?"):setTimeout(function(){a(e--,o,t)},100);var i={animation:!1,timeline:!1,geocoder:!1,navigationHelpButton:!1,baseLayerPicker:!1,fullscreenButton:!1,homeButton:!1,sceneModePicker:!1};r(),y=new Cesium.Viewer(g.id,i),document.querySelector(".cesium-infoBox-iframe").setAttribute("sandbox","allow-same-origin allow-popups allow-forms allow-scripts")}function i(e){if("undefined"==typeof Cesium||null==y)return void setTimeout(function(){i(e)},100);var o=e.data.geo["goto"],t=e.data.geo.pin,a=e.data.geo.kml,n=e.data.geo.zoom,r=e.data.geo.speed,s=e.data.geo.style;s&&l(s),"pin"==o&&t?m(t,n,r):o?m(o,n,r):n&&m([],n,r),t?d(t):c(),a&&f(a),g.style.display="block"}function n(){g.style.display="none"}function r(){b={NASA_BLACKMARBLE:function(){return new Cesium.TileMapServiceImageryProvider({url:"//cesiumjs.org/tilesets/imagery/blackmarble",maximumLevel:8,credit:"Black Marble imagery courtesy NASA Earth Observatory"})}},Object.keys(Cesium.BingMapsStyle).forEach(function(e){b["BING_"+e]=function(){return u(e)}}),Object.keys(b).forEach(function(e){["SCENE2D","SCENE3D","COLUMBUS_VIEW"].forEach(function(o){w[o+"_"+e]={sceneMode:o,imagery:e}})})}function s(e){E!==e&&("SCENE2D"==e?y.scene.morphTo2D(2):"SCENE3D"==e?y.scene.morphTo3D(2):"COLUMBUS_VIEW"==e&&y.scene.morphToColumbusView(2),E=e)}function u(e){var o="rad-geo-cesium-bingMapsApi-defaultKey",t=localStorage.getItem(o);return t?Cesium.BingMapsApi.defaultKey=t:console.log("Once you have a bing maps key, set it using `localStorage.setItem('"+o+"', 'your-key');`.  Meanwhile, some functionality may not be available."),new Cesium.BingMapsImageryProvider({url:"//dev.virtualearth.net",key:t,mapStyle:Cesium.BingMapsStyle[e]})}function l(e){var o=y.scene.imageryLayers,t=h[w[e].imagery];if(t)o.raiseToTop(t);else{var a=b[w[e].imagery];t=o.addImageryProvider(a()),h[w[e].imagery]=t}s(w[e].sceneMode)}function d(e){if("keep"!=e){c();var o=new Cesium.PinBuilder;e.forEach(function(e){var t=(e.color||"WHITE/RED").split("/"),a=t.pop(),i=t.length?t[0]:"WHITE",n=y.entities.add({position:Cesium.Cartesian3.fromDegrees(e.lon,e.lat),billboard:{image:o.fromColor(Cesium.Color[a],48).toDataURL(),verticalOrigin:Cesium.VerticalOrigin.BOTTOM},label:new Cesium.LabelGraphics({text:e.label||"",outlineColor:Cesium.Color.WHITE,outlineWidth:0,fillColor:Cesium.Color[i],pixelOffset:new Cesium.Cartesian2(0,20),style:Cesium.LabelStyle.FILL_AND_OUTLINE})});C.push(n)})}}function c(){C.forEach(function(e){y.entities.remove(e)}),C=[]}function m(e,o,t){if("keep"==e)throw new Error("we don't yet support goto=pins pins=keep");var a=Number(o),i="undefined"==typeof o;(i||isNaN(a))&&(a=6,i=!0);var n=Math.pow(10,Math.abs(a)),r=Number(t);("undefined"==typeof t||isNaN(r))&&(r=2e3);var s=p(e,n);y.camera.flyTo({destination:s,duration:r/1e3})}function f(e){y.dataSources.add(Cesium.KmlDataSource.load(e))}function p(e,o){var t;if(0==e.length){var a=y.camera.positionCartographic;t=Cesium.Cartesian3.fromRadians(a.longitude,a.latitude,o)}else if(1==e.length)t=Cesium.Cartesian3.fromDegrees(e[0].lon,e[0].lat,o);else{var t,i=e.map(function(e){return new Cesium.Cartographic.fromDegrees(e.lon,e.lat,o)}),n=Cesium.Rectangle.fromCartographicArray(i),a=Cesium.Rectangle.center(n);zoomDefaulted&&(o=4/3*Cesium.Ellipsoid.WGS84.cartesianToCartographic(y.camera.getRectangleCameraCoordinates(n)).height),t=Cesium.Cartesian3.fromRadians(a.longitude,a.latitude,o)}return t}var g,y,C=(e("rad-reveal"),[]);if("undefined"==typeof Cesium){var v=document.createElement("link");v.setAttribute("rel","stylesheet"),v.setAttribute("href","node_modules/cesiumjs/Build/Cesium/Widgets/widgets.css"),document.head.appendChild(v),head.js("node_modules/cesiumjs/Build/Cesium/Cesium.js")}var h={},b={},w={},E="SCENE3D";o.exports={initialize:t,show:i,hide:n}},{"rad-reveal":"rad-reveal"}],"/Users/larsonj/Sites/radReveal/rad-geo/src/geo.js":[function(e){"use strict";function o(e){var o=[],t=e.split(";");return t.forEach(function(e){e=e.replace("\\,","x002C");var t=e.split(","),a=Number(t[0].trim().match(C)[0]);t[0].toUpperCase().indexOf("S")>-1&&(a=-1*Math.abs(a));var i=Number(t[1].trim().match(C)[0]);t[1].toUpperCase().indexOf("W")>-1&&(i=-1*Math.abs(i));var n=(t[2]||"").trim();n=n.replace("x002C",",");var r=(t[3]||"").trim();o.push({lat:a,lon:i,label:n,original:e,color:r})}),o}function t(o,t){f=o||{};var a=f.mapProviderModule;m="string"==typeof a?e(a):"object"==typeof a?a:e("./protoMapProvider.js"),m.initialize(f.mapProviderConfig,t)}function a(e,o){o.data.geo={}}function i(e,o){o!=p&&(p=o,m.show(o))}function n(e,o){o!=g&&(g=o,m.hide(o))}function r(e,t){var a="pin"==e?"pin":o(e);t.data.geo["goto"]=a,"function"==typeof m.setGoto&&m.setGoto(a)}function s(e,o){o.data.geo.kml=e,"function"==typeof m.setKml&&m.setKml(e)}function u(e,t){var a="keep"==e?"keep":o(e);t.data.geo.pin=a,"function"==typeof m.setPins&&m.setPins(a)}function l(e,o){var t=2e3;"slow"==e?t=5e3:"medium"==e?t=2e3:"fast"==e?t=500:"instant"==e?t=0:(t=Number((e.match(C)||["2000"])[0]),isNaN(t)&&(t=2e3)),o.data.geo.speed=t,"function"==typeof m.setSpeed&&m.setSpeed(t)}function d(e,o){o.data.geo.zoom=e,"function"==typeof m.setZoom&&m.setZoom(e)}function c(e,o){o.data.geo.style=e,"function"==typeof m.setStyle&&m.setStyle(e)}var m,f,p,g,y=e("rad-reveal"),C=/(-)?(\d)*(\.)?(\d)*/;e("./cesiumMapProvider.js"),y.register("geo",t),y.on("data-rad-geo*","load",a),y.on("data-rad-geo*","hide",n),y.on("data-rad-geo-goto","show",r),y.on("data-rad-geo-pin","show",u),y.on("data-rad-geo-speed","show",l),y.on("data-rad-geo-zoom","show",d),y.on("data-rad-geo-style","show",c),y.on("data-rad-geo-kml","show",s),y.on("data-rad-geo*","show",i)},{"./cesiumMapProvider.js":1,"./protoMapProvider.js":2,"rad-reveal":"rad-reveal"}],2:[function(e,o){"use strict";function t(){r=document.createElement("div"),r.className="rad-geo-container",r.style.backgroundColor="cyan",document.body.appendChild(r),n("init")()}function a(){r.style.display="block",n("show")()}function i(){r.style.display="none",n("hide")()}function n(e){return function(o){u.push(s++ +" "+e+" "+(o?JSON.stringify(o):"")),u.length>10&&u.shift(),r.innerHTML=u.join("<br>"),o&&"function"==typeof o.callback&&o.callback()}}var r;alert("fixme!");var s=0,u=[];o.exports={initialize:t,setSpeed:n("setSpeed"),setZoom:n("setZoom"),setLoc:n("setLoc"),setGoto:n("setGoto"),show:a,hide:i}},{}]},{},["/Users/larsonj/Sites/radReveal/rad-geo/src/geo.js"]);